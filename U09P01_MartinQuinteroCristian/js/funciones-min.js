var comicArray;comics=e=>{document.getElementById("spin").style.display="inline";var t=new XMLHttpRequest;t.open("GET","https://gateway.marvel.com:443/v1/public/comics?limit=100&apikey=c7824b3fa7024da6df5a16f48d3c59d8"),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){$("#areacomic").empty(),document.getElementById("spin").style.display="none";var n=JSON.parse(this.responseText);(comicArray=n.data.results).forEach(t=>{if(titulo=t.title,titlomin=titulo.toLowerCase(),null!=e&&(e=e.toLowerCase()),titlomin.includes(e)||null==e){var n=document.createElement("div");document.getElementById("areacomic").appendChild(n);var a=document.createElement("h2");a.innerHTML=t.title,n.appendChild(a);var i=document.createElement("img");i.src=`${t.thumbnail.path}.${t.thumbnail.extension}`,i.id=`img${t.id}`,i.addEventListener("click",ventanaComic,[this]),n.appendChild(i);var r=document.createElement("p");n.appendChild(r);var o=document.createElement("span");o.setAttribute("id",t.id),r.appendChild(o),comprueba(t.id)}pagination("#areacomic","#paginationcomic")})}else console.log("Error:",t.statusText)},t.send()},personajes=e=>{document.getElementById("spin2").style.display="inline";var t=new XMLHttpRequest;t.open("GET","https://gateway.marvel.com:443/v1/public/characters?limit=100&apikey=c7824b3fa7024da6df5a16f48d3c59d8"),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){$("#areapersonajes").empty(),document.getElementById("spin2").style.display="none";var n=JSON.parse(this.responseText);personajesArray=n.data.results,personajesArray.forEach(t=>{if(titulo=t.name,titlomin=titulo.toLowerCase(),null!=e&&(e=e.toLowerCase()),titlomin.includes(e)||null==e){var n=document.createElement("div");document.getElementById("areapersonajes").appendChild(n);var a=document.createElement("h2");a.innerHTML=t.name,n.appendChild(a);var i=document.createElement("img");i.src=`${t.thumbnail.path}.${t.thumbnail.extension}`,i.id=`img${t.id}`,i.addEventListener("click",ventanaPersonaje,[this]),n.appendChild(i);var r=document.createElement("p");n.appendChild(r);var o=document.createElement("span");o.setAttribute("id",t.id),r.appendChild(o)}pagination("#areapersonajes","#paginationpersonajes")})}else console.log("Error:",t.statusText)},t.send()},comprueba=e=>{var t;comicArray.forEach(n=>{n.id==e&&(t=n.description)});var n=document.getElementById(e);null!=t?t.length>20&&(cadenacortada=t.substring(0,19),cadenacortada=`${cadenacortada} <span id='${e}' onclick="desacortar(this)" class="acortar">Ver mas...</span>`,n.parentElement.innerHTML=cadenacortada):(t="Description no disponible",n.parentElement.innerHTML=t)},desacortar=e=>{id=e.id,comicArray.forEach(e=>{e.id==id&&(document.getElementById(id).parentElement.innerHTML=`${e.description} <span id='${id}' onclick="comprueba(${id})">Ver menos</span>`)})},filtrarComic=()=>{$(document).ready((function(){filtro=$("#buscarcomic").val(),comics(filtro)}))},filtrarPersonaje=()=>{$(document).ready((function(){filtro=$("#buscarpersonaje").val(),personajes(filtro)}))},ventanaComic=e=>{$(document).ready((function(){navigator.userAgent.indexOf("Edge")>-1?(console.log("edge"),id=e.srcElement.id):id=e.toElement.id,id=id.substring(3),comicArray.forEach(e=>{if(e.id==id){var t=e.description;null==t&&(t="Description no disponible"),$(`<div title="Info"><p>${t}</p></div>`).dialog({modal:!0,title:`Info: ${e.title}`,width:550,minWidth:400,maxWidth:650,show:"Fold",hide:"Scale"})}})}))},ventanaPersonaje=e=>{$(document).ready((function(){navigator.userAgent.indexOf("Edge")>-1?(console.log("edge"),id=e.srcElement.id):id=e.toElement.id,id=id.substring(3),personajesArray.forEach(e=>{if(e.id==id){var t=e.description;null!=t&&""!=t||(t="Description no disponible"),$(`<div title="Info"><p>${t}</p></div>`).dialog({modal:!0,title:`Info: ${e.name}`,width:550,minWidth:400,maxWidth:650,show:"Fold",hide:"Scale"})}})}))},pagination=(e,t)=>{jQuery((function(n){var a=n(e).children(),i=a.length;a.slice(10).hide(),n(t).pagination({items:i,itemsOnPage:10,cssStyle:"light-theme",onPageClick:function(e){var t=10*(e-1),n=t+10;a.hide().slice(t,n).show()}})}))},comics(),personajes();var buscarcomic=document.getElementById("buscarcomic");buscarcomic.addEventListener("keyup",filtrarComic);var buscarpersonaje=document.getElementById("buscarpersonaje");buscarpersonaje.addEventListener("keyup",filtrarPersonaje);